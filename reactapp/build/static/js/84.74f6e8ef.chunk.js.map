{"version":3,"file":"static/js/84.74f6e8ef.chunk.js","mappings":"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","sources":["components/Review.tsx","assets/icons/share-icon.svg","assets/icons/review-form__add-image-icon.svg","components/ReviewForm.tsx","pages/ProductPage.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Reviews } from \"../utils/types\";\r\nimport \"../index.scss\";\r\nimport UserAvatar from \"../assets/img/templateUser-avatar.png\";\r\n\r\ntype ReviewProps = {\r\n    review: Reviews;\r\n};\r\n\r\nfunction Review({ review }: ReviewProps) {\r\n    const [userName, setUserName] = useState<string>(\"\"); \r\n    const readableDate = new Date(review.date).toLocaleDateString('ru-RU'); \r\n\r\n    useEffect(() => {\r\n        const fetchUserName = async () => {\r\n            try {\r\n                const baseUrl = window.location.origin; \r\n                const response = await axios.get(`${baseUrl}/api/get/user/${review.user_id}`);\r\n                const user = response.data.user[0];\r\n                setUserName(user.login);\r\n            } catch (error) {\r\n                console.error('Ошибка при получении логина пользователя:', error);\r\n            }\r\n        };\r\n\r\n        fetchUserName();\r\n    }, [review.user_id]);\r\n\r\n    const renderStars = useCallback(() => {\r\n        return [1, 2, 3, 4, 5].map(rate => (\r\n            <input \r\n                key={rate}\r\n                type=\"radio\" \r\n                className=\"star-rate__star-radio\"  \r\n                value={rate} \r\n                aria-label={rate === 1 ? \"Плохо\" : rate === 2 ? \"Удовлетворительно\" : rate === 3 ? \"Нормально\" : rate === 4 ? \"Хорошо\" : \"Отлично\"}\r\n                checked={review.rate === rate}\r\n                readOnly\r\n            />\r\n        ));\r\n    }, [review.rate]);\r\n\r\n    return (\r\n        <article className=\"review-article\">\r\n            <div className=\"review-article__review-container\">\r\n                <div className=\"review-container__user-info\">\r\n                    <img className=\"user-info__user-avatar\" src={UserAvatar} alt=\"Review user avatar\" />\r\n                    <h4 className=\"user-info__user-name\">{userName}</h4>\r\n                </div>\r\n                <div className=\"review-container__review-info\">\r\n                    <div className=\"review-info__star-rate\">\r\n                        {renderStars()}\r\n                    </div>\r\n                    <time className=\"review-info__review-date\" dateTime={new Date(review.date).toISOString()}>\r\n                        {readableDate}\r\n                    </time>\r\n                </div>\r\n            </div>\r\n            <p className=\"review-article__text-p\">{review.commentary}</p>\r\n            {review.icons && <img className=\"review-article__product-image\" src={review.icons} alt=\"Review product\" />}\r\n        </article>\r\n    );\r\n}\r\n\r\nexport default Review;","var _g, _defs;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgShareIcon(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#clip0_51_259)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.8785 15.9167C12.2518 15.9167 11.7191 15.6967 11.2804 15.2567C10.8416 14.8167 10.6223 14.2825 10.6223 13.6539C10.6223 13.5659 10.6322 13.4583 10.652 13.3311C10.6718 13.2038 10.7014 13.0893 10.741 12.9875L4.74416 9.50421C4.54624 9.72851 4.30214 9.90994 4.01186 10.0485C3.72159 10.187 3.42471 10.2563 3.12124 10.2563C2.4945 10.2563 1.96178 10.0369 1.52306 9.59822C1.08435 9.1595 0.86499 8.62678 0.86499 8.00004C0.86499 7.3733 1.08435 6.84058 1.52306 6.40186C1.96178 5.96315 2.4945 5.74379 3.12124 5.74379C3.42471 5.74379 3.71499 5.80317 3.99207 5.92192C4.26916 6.04067 4.51985 6.21219 4.74416 6.4365L10.741 2.99275C10.7014 2.89945 10.6718 2.79448 10.652 2.67784C10.6322 2.56122 10.6223 2.44848 10.6223 2.33962C10.6223 1.71289 10.8416 1.18016 11.2804 0.741447C11.7191 0.302732 12.2518 0.083374 12.8785 0.083374C13.5053 0.083374 14.038 0.302732 14.4767 0.741447C14.9154 1.18016 15.1348 1.71289 15.1348 2.33962C15.1348 2.96636 14.9154 3.49909 14.4767 3.9378C14.038 4.37652 13.5053 4.59587 12.8785 4.59587C12.5704 4.59587 12.2756 4.54639 11.9943 4.44744C11.713 4.34848 11.4733 4.18685 11.2754 3.96254L5.27853 7.28754C5.30492 7.3931 5.32801 7.51514 5.3478 7.65369C5.36759 7.79223 5.37749 7.90927 5.37749 8.00481C5.37749 8.10036 5.36759 8.19932 5.3478 8.30169C5.32801 8.40406 5.30492 8.50803 5.27853 8.61358L11.2754 12.0177C11.4733 11.833 11.7042 11.6846 11.9681 11.5724C12.232 11.4603 12.5355 11.4042 12.8785 11.4042C13.5053 11.4042 14.038 11.6236 14.4767 12.0623C14.9154 12.501 15.1348 13.0337 15.1348 13.6605C15.1348 14.2872 14.9154 14.8199 14.4767 15.2586C14.038 15.6973 13.5053 15.9167 12.8785 15.9167ZM12.8792 3.40837C13.1822 3.40837 13.436 3.30589 13.6405 3.10091C13.845 2.89594 13.9473 2.64194 13.9473 2.33893C13.9473 2.03592 13.8448 1.78216 13.6398 1.57764C13.4348 1.37313 13.1808 1.27087 12.8778 1.27087C12.5748 1.27087 12.3211 1.37336 12.1166 1.57834C11.912 1.78331 11.8098 2.03731 11.8098 2.34032C11.8098 2.64333 11.9123 2.89709 12.1172 3.1016C12.3222 3.30612 12.5762 3.40837 12.8792 3.40837ZM3.12193 9.06879C3.42494 9.06879 3.67871 8.9663 3.88322 8.76133C4.08773 8.55635 4.18999 8.30236 4.18999 7.99935C4.18999 7.69634 4.0875 7.44258 3.88253 7.23806C3.67755 7.03355 3.42356 6.93129 3.12055 6.93129C2.81754 6.93129 2.56377 7.03378 2.35926 7.23875C2.15475 7.44373 2.05249 7.69772 2.05249 8.00073C2.05249 8.30374 2.15498 8.55751 2.35995 8.76202C2.56493 8.96653 2.81892 9.06879 3.12193 9.06879ZM12.8792 14.7292C13.1822 14.7292 13.436 14.6267 13.6405 14.4217C13.845 14.2168 13.9473 13.9628 13.9473 13.6598C13.9473 13.3568 13.8448 13.103 13.6398 12.8985C13.4348 12.694 13.1808 12.5917 12.8778 12.5917C12.5748 12.5917 12.3211 12.6942 12.1166 12.8992C11.912 13.1041 11.8098 13.3581 11.8098 13.6612C11.8098 13.9642 11.9123 14.2179 12.1172 14.4224C12.3222 14.627 12.5762 14.7292 12.8792 14.7292Z\",\n    fill: \"#CCC5B9\"\n  }))), _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"clip0_51_259\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: 14.2698,\n    height: 15.8333,\n    fill: \"white\",\n    transform: \"translate(0.86499 0.083374)\"\n  })))));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgShareIcon);\nexport default __webpack_public_path__ + \"static/media/share-icon.078e541564f15a9740537cec6baba9ab.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgReviewFormAddImageIcon(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M720-330q0 104-73 177T470-80q-104 0-177-73t-73-177v-370q0-75 52.5-127.5T400-880q75 0 127.5 52.5T580-700v350q0 46-32 78t-78 32q-46 0-78-32t-32-78v-330q0-17 11.5-28.5T400-720q17 0 28.5 11.5T440-680v330q0 13 8.5 21.5T470-320q13 0 21.5-8.5T500-350v-350q-1-42-29.5-71T400-800q-42 0-71 29t-29 71v370q-1 71 49 120.5T470-160q70 0 119-49.5T640-330v-350q0-17 11.5-28.5T680-720q17 0 28.5 11.5T720-680v350Z\",\n    fill: \"#CCC5B9\"\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgReviewFormAddImageIcon);\nexport default __webpack_public_path__ + \"static/media/review-form__add-image-icon.16aa2699eed6b58147903dc5b785d709.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, useEffect, useCallback } from 'react';\r\nimport '../ProductStyle.scss';\r\nimport ImageAttachIcon from \"../assets/icons/review-form__add-image-icon.svg\";\r\nimport { motion } from 'framer-motion';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\n\r\ninterface ReviewState {\r\n    text: string;\r\n    rating: number;\r\n    image?: string | ArrayBuffer | null;\r\n}\r\n\r\nfunction ReviewForm({ productId }: { productId: string }) {\r\n    const [review, setReview] = useState<ReviewState>({ text: '', rating: 1 });\r\n    const [userId, setUserId] = useState<string | null>(null);\r\n    const [imageName, setImageName] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        const userIdFromCookie = Cookies.get('user_id');\r\n        if (userIdFromCookie) {\r\n            setUserId(userIdFromCookie);\r\n        }\r\n    }, []);\r\n\r\n    const handleTextChange = useCallback((event: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n        setReview(prev => ({ ...prev, text: event.target.value }));\r\n    }, []);\r\n\r\n    const handleRatingChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\r\n        setReview(prev => ({ ...prev, rating: Number(event.target.value) }));\r\n    }, []);\r\n\r\n    const handleImageChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (event.target.files && event.target.files[0]) {\r\n            const file = event.target.files[0];\r\n            setImageName(file.name);\r\n\r\n            const reader = new FileReader();\r\n            reader.onload = () => {\r\n                setReview(prev => ({ ...prev, image: reader.result }));\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    }, []);\r\n\r\n    const handleSubmit = useCallback(async (event: React.FormEvent) => {\r\n        event.preventDefault();\r\n        if (!userId) {\r\n            console.error('ID пользователя не найден!');\r\n            return;\r\n        }\r\n\r\n        const baseUrl = window.location.origin;\r\n\r\n        try {\r\n            const params = new URLSearchParams();\r\n            params.append('commentary', review.text);\r\n            params.append('rate', String(review.rating));\r\n            params.append('product', productId);\r\n            params.append('user_id', userId);\r\n            if (review.image) {\r\n                params.append('icon', review.image as string);\r\n            }\r\n\r\n            await axios.post(`${baseUrl}/api/post/review`, params, {\r\n                headers: {\r\n                    'Content-Type': 'application/x-www-form-urlencoded'\r\n                }\r\n            });\r\n            alert(\"Отзыв успешно отправлен!\");\r\n            window.location.reload();\r\n        } catch (error) {\r\n            console.error('Ошибка при отправке отзыва:', error);\r\n        }\r\n    }, [review, userId, productId]);\r\n\r\n    return (\r\n        <form className='product-page__review-form' onSubmit={handleSubmit}>\r\n            <h5 className='review-form__heading'>Оставить отзыв</h5>\r\n            <div className=\"review-form__stars-container\">\r\n                {[...Array(5)].map((_, index) => (\r\n                    <input\r\n                        key={index}\r\n                        type=\"radio\"\r\n                        className=\"review-form__star-radio\"\r\n                        name=\"rating\"\r\n                        value={index + 1}\r\n                        aria-label={`Рейтинг ${index + 1}`}\r\n                        checked={review.rating === index + 1}\r\n                        onChange={handleRatingChange}\r\n                    />\r\n                ))}\r\n            </div>\r\n            <textarea\r\n                className='review-form__textarea'\r\n                cols={30}\r\n                rows={5}\r\n                placeholder='Комментарий'\r\n                value={review.text}\r\n                onChange={handleTextChange}\r\n            />\r\n            <div className='review-form__image-container'>\r\n                <label htmlFor=\"review-image\" className='review-form__image-attach'>\r\n                    <img src={ImageAttachIcon} alt=\"Прикрепить изображение\" />\r\n                </label>\r\n                <input\r\n                    className='review-form__image-input'\r\n                    type=\"file\"\r\n                    id=\"review-image\"\r\n                    accept='.png, .jpg, .jpeg'\r\n                    onChange={handleImageChange}\r\n                />\r\n                {imageName && <div className=\"review-form__image-name\">{imageName}</div>}\r\n            </div>\r\n            <motion.button\r\n                className='review-form__send-button'\r\n                type='submit'\r\n                whileTap={{ scale: 0.98 }}\r\n                transition={{ duration: 0.2, type: \"spring\" }}\r\n            >\r\n                Отправить отзыв\r\n            </motion.button>\r\n        </form>\r\n    );\r\n}\r\n\r\nexport default ReviewForm;","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { Product, Reviews } from '../utils/types';\r\nimport Review from '../components/Review';\r\nimport axios from 'axios';\r\nimport '../ProductStyle.scss';\r\nimport ShareIcon from \"../assets/icons/share-icon.svg\";\r\nimport ReviewForm from '../components/ReviewForm';\r\nimport { Link, useParams } from 'react-router-dom';\r\n\r\nfunction ProductPage() {\r\n    const { id } = useParams(); // Получение id из URL-параметров\r\n    \r\n    // Состояние для продукта и рецензий\r\n    const [product, setProduct] = useState<Product | null>(null);\r\n    const [reviews, setReviews] = useState<Reviews[]>([]);\r\n    \r\n    // Состояние для среднего рейтинга\r\n    const [averageRating, setAverageRating] = useState<number>(0);\r\n    \r\n    const fetchProductAndReviews = useCallback(async () => {\r\n        try {\r\n            const baseUrl = window.location.origin;\r\n            const [productResponse, reviewsResponse] = await Promise.all([\r\n                axios.get(`${baseUrl}/api/get/products`),\r\n                axios.get(`${baseUrl}/api/get/reviews/${id}`)\r\n            ]);\r\n\r\n            const productData = productResponse.data.products.find((item: Product) => item.id.toString() === id);\r\n            setProduct(productData);\r\n\r\n            const reviewsData = reviewsResponse.data.review;\r\n            setReviews(reviewsData);\r\n\r\n            const totalRating = reviewsData.reduce((acc: number, review: Reviews) => acc + review.rate, 0);\r\n            setAverageRating(reviewsData.length > 0 ? totalRating / reviewsData.length : 0);\r\n        } catch (error) {\r\n            console.error('Ошибка при получении данных:', error);\r\n        }\r\n    }, [id]);\r\n\r\n    useEffect(() => {\r\n        fetchProductAndReviews();\r\n    }, [fetchProductAndReviews]);\r\n\r\n    const trimText = (text: string, limit: number): string => \r\n        text.length > limit ? text.substring(0, limit) + '...' : text;\r\n\r\n    const countReviewsByRate = useCallback((rate: number): number => \r\n        reviews.filter(review => review.rate === rate).length, [reviews]);\r\n\r\n    const percentageOfRate = useCallback((rate: number): number => \r\n        (countReviewsByRate(rate) / reviews.length) * 100, [countReviewsByRate, reviews.length]);\r\n\r\n    if (!product) {\r\n        return <div>Загрузка...</div>;\r\n    }\r\n\r\n    return (\r\n        <section className=\"product-page\">\r\n            <section className=\"product-page__main-section\">\r\n                <img src={product.icons} className=\"product-page__img\" alt=\"Product\" />\r\n                <div className=\"product-page__info-div\">\r\n                    <span className=\"product-page__text-span\">\r\n                        <h2 className=\"product-page__heading-h2\">{product.title}</h2>\r\n                        <p className=\"product-page__short-desc-div\">{trimText(product.description, 200)}</p>\r\n                    </span>\r\n                    <div className=\"product-page__container-div\">\r\n                        <button className=\"product-page__share-button\">\r\n                            <img src={ShareIcon} alt=\"Share\" />\r\n                        </button>\r\n                        <div className=\"product-page__price-buy-div\">\r\n                            <span className=\"product-page__price-span\">{product.price} ₽</span>\r\n                            <Link to={`/payment?price=${product.price}`} className=\"product-page__buy-link\">Купить</Link>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section className=\"product-page__info-section\">\r\n                <h3 className=\"product-page__block-heading\">Описание</h3>\r\n                <p className=\"product-page__desc\">{product.description}</p>\r\n                <ul className=\"product-page__tags-ul\">\r\n                    {product.tags.split('|').map((tag, index) => (\r\n                        <li key={index} className=\"product-page__tag-li\">{tag}</li>\r\n                    ))}\r\n                </ul>\r\n            </section>\r\n            <section className=\"product-page__reviews-section\">\r\n                <h3 className=\"product-page__block-heading\">Отзывы</h3>\r\n                <div className='reviews-section__rate-block'>\r\n                    <div className='rate-block__rating'>\r\n                        <span className='rate-block__rate-number'>{averageRating.toFixed(1)}</span>\r\n                        <div className=\"rate-block__star-rating\">\r\n                            <div className=\"star-rating__back-stars\">\r\n                                {'★★★★★'.split('').map((star, i) => (\r\n                                    <span key={`back-star-${i}`}>{star}</span>\r\n                                ))}\r\n                                <div className=\"star-rating__front-stars\" \r\n                                    style={{ width: `${(averageRating / 5) * 100}%` }}>\r\n                                    {'★★★★★'.split('').map((star, i) => (\r\n                                        <span key={`front-star-${i}`}>{star}</span>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className='rate-block__progressbars-group'>\r\n                        {[5, 4, 3, 2, 1].map(rate => (\r\n                            <div className='progressbars-group__progressbar-container' key={rate}>\r\n                                <span className='rate-progressbar__rate-number'>{rate}</span>\r\n                                <div className='progressbar-container__progressbar'>\r\n                                    <div className='progressbar__active-line' style={{ width: `${percentageOfRate(rate)}%` }}></div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n                <ReviewForm productId={product.id.toLocaleString('ru-RU')} />\r\n                <div className='product-page__reviews-container'>\r\n                    {reviews.map(review => (\r\n                        <Review key={review.id} review={review} />\r\n                    ))}\r\n                </div>\r\n            </section>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default ProductPage;"],"names":["_ref","review","userName","setUserName","useState","readableDate","Date","date","toLocaleDateString","useEffect","async","baseUrl","window","location","origin","user","axios","get","concat","user_id","data","login","error","console","fetchUserName","renderStars","useCallback","map","rate","_jsx","type","className","value","checked","readOnly","_jsxs","children","src","alt","dateTime","toISOString","commentary","icons","productId","setReview","text","rating","userId","setUserId","imageName","setImageName","userIdFromCookie","Cookies","handleTextChange","event","prev","target","handleRatingChange","Number","handleImageChange","files","file","name","reader","FileReader","onload","image","result","readAsDataURL","handleSubmit","preventDefault","params","URLSearchParams","append","String","post","headers","alert","reload","onSubmit","Array","_","index","onChange","cols","rows","placeholder","htmlFor","ImageAttachIcon","id","accept","motion","button","whileTap","scale","transition","duration","useParams","product","setProduct","reviews","setReviews","averageRating","setAverageRating","fetchProductAndReviews","productResponse","reviewsResponse","Promise","all","productData","products","find","item","toString","reviewsData","totalRating","reduce","acc","length","countReviewsByRate","filter","percentageOfRate","title","description","limit","substring","ShareIcon","price","Link","to","tags","split","tag","toFixed","star","i","style","width","ReviewForm","toLocaleString","Review","trimText"],"sourceRoot":""}